## zookeeper应用场景实例
zookeeper从设计模式角度来看，是一个基于观察者模式设计的分布式服务管理框架。

它负责存储和管理分布式系统都关心的数据，然后接受客户端的注册，一旦这些数据状态发送变化，

zookeeper就会通知那些注册了监控的观察者（客户端程序），从而实现类似集群中的Master-Slave管理模式。

### 全局配置管理
配置的管理在分布式应用环境中很常见。

比如在平常的应用系统中，会有这样的需求：机器的配置列表，运行时的开关，数据库的配置信息等。

将系统的各种配置参数抽取出来，在一个地方集中维护，是比较好的方式。

比如，将redis相关参数，数据库的相关参数等通过zk进行配置，以便实现动态更新配置，提高系统的可配置性。（在配置文件中用固定参数的写法是不推荐的）

这些全局配置信息通常具备3个以下特性：

	1、数据量比较小；
	2、数据在运行时动态发生变化；
	3、集群中各个节点共享一份配置信息，确保配置的一致性。


### 集群管理
zookeeper不仅能够帮助维护当前集群环境中机器的服务状态，

而且能帮助选出一个“Leader”，让这个Leader来管理集群。

这就是zookeeper另一个重要的功能，领导者选举，并实现集群的容错功能。

	1、希望知道当前集群中有多少个节点在工作
	2、对集群每天的集群运行状态进行数据收集
	3、对集群中的机器进行上下线操作

### 发布订阅
zookeeper是一个典型的发布/订阅模式的分布式系统。

开发人员可以使用它来进行分布式数据的发布与订阅。


### 数据库动态切换
系统在初始化的时候，从zookeeper上某个节点读取数据库的配置文件。

一旦配置信息发生变更，zookeeper就会向监控该节点的所有客户端发出通知。

每个客户端在收到这个变更通知后，就知道数据库配置发生了变化，然后根据最新的配置创建新的数据源，接着切换到新的数据源上。

### 分布式日志收集
做一个日志系统收集集群中所有节点的日志，进行日志收集的统一管理。

比如使用zookeeper配置不同类型的日志分别从节点的哪个目录进行采集。

### 分布式锁 - Curator实现
java提供synchronized或者ReentrantLock来解决同一个JVM虚拟机内部多线程的并发同步问题。

分布式锁则是解决不同JVM进程之间的线程同步问题！

Curator提供了**InterProcessMutex**来解决分布式锁的问题。


### 分布式场景下进行全局计数器 - Curator实现
Curator提供了**DistributedAtomicInteger**来解决分布式系统全局计数器的功能。


### 分布式场景下的Barrier - Curator实现
Curator提供了**DistributedBarrier**来实现分布式系统间线程的协调控制功能。
	DistributedBarrier 同时启动任务
	DistributedDoubleBarrier 同时启动任务，同时结束任务


### Curator提供的分布式队列
	DistributedQueue
	DistributedDelayQueue
	DistributedPriorityQueue


### 分布式场景下生成全局唯一ID

