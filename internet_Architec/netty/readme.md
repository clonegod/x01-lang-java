开源网络通信框架： 
	MINA
	NETTY  
		编解码、半包读写的处理

Netty优点：健壮、性能稳定

Netty使用步骤：
1、创建两个NIO线程组，一个专门用来处理网络事件（接受客户端连接），另一个专门用来进行网络通信的读写操作。
2、创建1个ServerBootstrap对象，配置Netty一系列参数，比如设置接受、传出数据的缓冲区大小等。
3、创建一个实际处理数据的ChannelInitializer，进行初始化配置工作，比如设置接收和返回数据的字符集、数据格式、实际处理数据的接口类等。
4、绑定端口，执行同步阻塞方法等待服务端完成启动。

参考：http://ifeve.com/category/netty/


Netty - 侧重于高效的网络通信
	传输层/协议：tcp udp http ssl ... 
	序列化：google-protobuf 
	压缩：zlib/gzip large-file-transport 
	核心：可扩展的事件模型、统一通信接口、零拷贝的数据复制、易用的ByteBuffer等

------------------------------------------	
TCP粘包、拆包的问题
	TCP底层并不了解数据包的业务含义，它会根据TCP缓冲区的实际情况进行包的划分。
	粘包：TCP底层将多个小包封装为一个大的数据包进行发送。
	拆包：TCP底层将1个大的数据包拆分为多个小包进行多次发送。

粘包、拆包产生的原因：
	1、应用程序发送的字节大小小于套接口发送的缓冲区大小；
	2、进行MSS大小的TCP分段？
	3、以太网的payload大于MTU进行IP分片？
	
粘包、拆包的解决方案：
	1、定长消息，比如将报文大小固定为10K,如果不够，以空格补位。
	2、在包的末尾增加特殊字符进行分割，比如回车符。
	3、将消息分为消息头和消息体，在消息头部包含表示消息总长度的字段，然后进行业务逻辑的处理。
	
Netty对粘包、拆包提供的解决方案：
	1、分隔符类	DelimiterBasedFrameDecoder （自定义分隔符）
	2、FixedLengthFrameDecoder （定长消息）
------------------------------------------

Netty编解码技术

序列化的目的：
1、对象持久化
2、数据网络传输

Java序列化的不足：
1、java序列化结果不能跨平台，只能用java进行反序列化；
2、序列化速度慢，耗费cpu
3、序列化后的码流太大，不便于快速的网络传输	

流行的编解码框架：
1、Google Protobuf
2、基于Protobuf的Kyro
3、JBoos Marshalling （通过在pipeline上配置编解码器，可直接对POJO进行读写操作）
4、MessagePack框架

------------------------------------------
Netty最佳实践 - 长连接
	Netty主要用来在2台或多台服务器之间进行网络通信。
通信的方式可以分为以下三种方式：
1、长连接。
	使用长连接，客户端与服务器以通道不断开的形式进行通信，客户端一直与服务器保持连接状态。
	适用于服务器性能较好，客户端数量不多的场景，推荐使用。
2、短连接。
	客户端先将数据在本地进行缓存，当数据达到临界值时进行一次性批量发送，或者使用定时任务进行轮询提交。
	这种方式适用于对实时性要求不高的场景。
3、间歇性长连接。
	客户端与服务器先以长连接方式进行通信。
	在一段给定时间内，如果客户端没有向服务器提交数据，则断开连接。
	之后，只有等到客户端真正有数据需要再次提交时，才建立新的连接与服务器通信。
	这种方式可在客户端长时间没有数据可发送时，节约服务器端的资源。
	该方式有两个要点：
		a、如何实现发生超时自动断开长连接通道？
		b、长连接断开后，客户端如何实现自动重连？
	
------------------------------------------
Netty最佳实践 - 心跳检测
	服务器集群中，通过定时发送数据包来判断节点是否存活。
	在分布式架构里叫做心跳检测或心跳监控。
	在服务器集群环境中，心跳检测可以实现以下功能：
	1、判断节点是否存活，如果宕机了，需要发送报警通知；
	2、master收集slave节点运行状态，比如cpu负荷，内存使用情况，磁盘使用情况等(使用sigar进行系统信息收集)，以便及时监控节点的运行状态，即使调整任务分配策略等；
	3、通过心跳机制发送更新数据（系统配置数据），让集群内各个节点维护的数据保持一致（分布式环境下的一致性保障，CAP理论中的C-Consistency）；
	
怎样在netty中进行心跳检测？
	1、认证（安全性考虑）。
		slave在连接到master后，首先在master端进行认证，认证通过，则保持与slave的连接。
		如果认证不通过，则立即断开连接。
	2、定时发送心跳包（scheduler调度器）。
		slave在收到master认证通过的确认消息后，使用定时器scheduler周期性的往master发送消息，master接收到之后进行相应处理。
		心跳包的内容：slave发送给master的的信息可以是本机的系统状态，或者真实的业务数据。具体发送什么数据需根据实际业务场景而定。

------------------------------------------
Netty + HTTP协议
	Netty支持基于http协议栈的开发，无论从性能还是可靠性上都表现优异，非常适合web容器场景下的应用。
	相比与传统的tomcat容器，netty更加轻量，灵活性和定制性更强。
	
使用netty开发一个http文件服务器，提供下载和上传的功能。
	netty异步非阻塞模式下，处理文件传输。
	关键点：使用Chunk 对大文件进行分块，然后再传输。
	

------------------------------------------
 
实际应用场景：
	使用NETTY搭建高性能web服务器（基于TCP/HTTP协议，支持多种数据序列化方式）
	使用NETTY作为web框架内部的服务器提供网络功能，如playframework
	 如使用Netty作为分布式系统间交换数据的通信框架；
	 如使用Netty开发文件系统服务器；